---
sidebar_position: 7
---

# AI設計書（AI対戦対応時）

## 1. 設計方針

- **目的**  
  - プレイヤーが不在や少人数の場合、AIが代わりに対戦相手としてゲームに参加できるようにする。
  - ゲームバランスを保つため、AIの難易度調整が可能な設計とする。
- **学習方式**  
  - 強化学習やルールベースAIなど、開発リソースやゲーム性に応じて選択。
  - 今回は、まずはルールベースAIを実装し、将来的に強化学習や機械学習によるAIへ拡張可能とする。

## 2. AIの基本仕様

- **対戦モード**  
  - 1人プレイ時、またはプレイヤー不足時にAIが自動参加。
  - 最大4人モードでもAIがプレイヤーを補完。
- **難易度設定**  
  - 初級・中級・上級など複数段階を用意。
  - 難易度ごとにAIの反応速度や戦略を調整。
- **AIの行動範囲**  
  - ボールの位置・速度・ブロック配置をリアルタイムで監視。
  - パドル（ラケット）の移動を最適化し、ボールを落とさないようにする。
  - パワーアップや特殊ブロックの効果も考慮した行動が可能。

## 3. AIロジック設計

### 3.1 ルールベースAI（初期実装）

- **ボールの予測**  
  - ボールの現在位置・速度から、パドル到達位置を計算。
  - パドルをその位置に移動させる。
- **パワーアップ対応**  
  - パワーアップや特殊ブロックの出現を検知し、効果を優先的に取得。
- **戦略の切り替え**  
  - 難易度に応じて、反応速度や予測精度を調整。
  - 例：初級は予測誤差を大きく、上級はほぼ正確に追従。

### 3.2 強化学習AI（拡張時）

- **学習データの収集**  
  - ゲームプレイ中の状態（ボール位置、ブロック状態、パワーアップ等）と行動（パドル移動）を記録。
- **学習フレームワーク**  
  - Unity ML-AgentsやChainerRLなどの強化学習ライブラリを活用[2][4]。
  - Unreal Engine用の強化学習プラグインや自作エージェントも検討。
- **学習プロセス**  
  - AIにゲームをプレイさせ、成功（ボールを落とさない、ブロックを壊す）に応じて報酬を与える[2][4]。
  - 学習時間やステップ数でAIの熟練度を調整[2]。
- **推論・実行**  
  - 学習済みモデルをゲームに組み込み、リアルタイムで行動決定。

## 4. AIのネットワーク対応

- **ゲームサーバー上でのAI実行**  
  - AIはサーバー側で動作し、クライアントには通常のプレイヤーとして見える。
  - ネットワーク同期は通常のプレイヤーと同じ方式で行う。
- **AIの参加・退出**  
  - プレイヤーが参加/退出した際、AIの自動参加・退出を制御。
  - マッチメイキング時にAI参加フラグを設定。

## 5. 難易度調整

- **反応速度**  
  - 難易度ごとにパドルの移動速度や反応遅延を設定。
- **戦略の複雑さ**  
  - 上級AIはブロック破壊の効率化やパワーアップの積極取得など、高度な戦略を実装。
- **学習モデルの切り替え**  
  - 強化学習AIの場合、学習済みモデルを難易度ごとに用意し、切り替え可能とする。

## 6. 拡張性・将来性

- **AIの種類増加**  
  - 複数のAIキャラクターや個性を持たせたAIを追加可能。
- **学習データの蓄積**  
  - プレイヤーの行動データを蓄積し、より人間らしいAIへ発展。
- **オンライン学習**  
  - 将来的にAIがプレイヤーの行動をリアルタイムで学習し、適応する仕組みも検討。

---

## まとめ

本設計書に基づき、まずはルールベースAIを実装し、将来的に強化学習や機械学習による高度なAIへ拡張できる柔軟な設計を行います。  
AIはサーバー側で動作し、ネットワーク同期や難易度調整にも対応することで、プレイヤー不足時やシングルプレイ時も快適なゲーム体験を提供します。

Citations:
[1] https://note.com/novel_honest2969/n/n9f3ab5d52c83
[2] https://note.com/suraimuking/n/n3304e36b7b9e
[3] https://qiita.com/4q_sano/items/2183602b0152b3924e18
[4] https://avinton.com/academy/reinforcement-with-chainerrl/
[5] https://gigazine.net/news/20160620-google-deep-reinforcement-learning/
[6] https://zenn.dev/malme/articles/af106be72571e1
[7] https://freelance-life.jp/unity_block_breaker/
[8] https://hatana-kikaku.com/archives/113

---
Answer from Perplexity: pplx.ai/share