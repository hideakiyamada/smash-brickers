---
sidebar_position: 6
---

# データ設計書

## 1. 設計方針

- **拡張性・保守性**：データ構造は将来的な機能拡張や管理運用を考慮し、柔軟かつ整理された形で設計する。
- **多言語対応**：テキストデータは外部ファイルやDataTableで管理し、日本語・英語対応を容易にする。
- **ネットワーク対応**：オンライン対戦・マッチメイキング・ランキング機能に対応したデータ設計を行う[5]。

## 2. 主要データ構造

### 2.1 プレイヤーデータ

| 項目名         | 型           | 説明                                                         |
|----------------|--------------|--------------------------------------------------------------|
| PlayerID       | UUID/文字列  | プレイヤーを一意に識別するID                                 |
| Nickname       | 文字列       | プレイヤー名（多言語対応可能）                               |
| Score          | 整数         | 累積スコア（ランキング用）                                   |
| CurrentStatus  | 列挙型       | プレイ中・待機中・切断中など                                 |
| Language       | 列挙型       | 言語設定（日本語/英語など）                                  |

### 2.2 ゲームデータ

| 項目名         | 型           | 説明                                                         |
|----------------|--------------|--------------------------------------------------------------|
| GameID         | UUID/文字列  | ゲームセッションを一意に識別するID                           |
| PlayerList     | リスト       | 参加プレイヤーIDリスト                                       |
| BlockLayout    | 配列/構造体  | ブロック配置情報（位置、種類、耐久値など）                   |
| BallPosition   | 構造体       | ボールの位置・速度                                           |
| PaddlePosition | 構造体       | ラケットの位置                                               |
| PowerUpState   | 配列/構造体  | パワーアップや特殊ブロックの状態                             |
| GameStatus     | 列挙型       | プレイ中・終了・中断など                                     |
| WinnerID       | UUID/文字列  | 勝利プレイヤーID                                             |
| PenaltyTime    | 浮動小数点数 | ボール落下時のペナルティ待ち時間                             |

### 2.3 ランキングデータ

| 項目名         | 型           | 説明                                                         |
|----------------|--------------|--------------------------------------------------------------|
| Rank           | 整数         | 順位                                                         |
| PlayerID       | UUID/文字列  | プレイヤーID                                                 |
| Nickname       | 文字列       | プレイヤー名                                                 |
| Score          | 整数         | スコア                                                       |
| Date           | 日時         | スコア獲得日時                                               |

### 2.4 マスターデータ

| 項目名         | 型           | 説明                                                         |
|----------------|--------------|--------------------------------------------------------------|
| BlockType      | 列挙型/構造体| ブロック種類（耐久値、スコア、エフェクトなど）               |
| PowerUpType    | 列挙型/構造体| パワーアップ種類（効果、出現確率など）                       |
| StageLayout    | 配列/構造体  | ステージごとのブロック配置                                   |
| PenaltyTime    | 浮動小数点数 | 標準ペナルティ時間                                           |
| TextLocalization| データテーブル| 多言語対応テキスト（日本語・英語）                           |

※マスターデータはゲーム内で不変のデータとして扱い、DataTableや外部ファイルで管理[3][5]。

---

## 3. データ管理方式

- **マスターデータ**：Unreal EngineのDataTableや構造体で管理し、ゲーム起動時に読み込む[3]。
- **ランキングデータ**：ゲーム終了時にREST API経由でサーバーに送信し、DBで集計・管理。
- **プレイヤーデータ・ゲームデータ**：ゲームサーバーで管理し、ネットワーク同期を行う。
- **多言語テキスト**：DataTableや外部ファイルで管理し、言語設定に応じて切り替え。

---

## 4. 補足

- **データの永続化**：ランキングやプレイヤー設定はサーバーDBで永続化。
- **ネットワーク同期**：ゲームデータはサーバーが権威を持ち、クライアント間で同期。
- **拡張性**：ブロック・パワーアップ・ステージなどの追加を容易にするため、マスターデータを柔軟に設計。

---

この設計書をもとに、データベースやUnreal Engineプロジェクト内のデータ構造を実装します。

Citations:
[1] https://qiita.com/shiracamus/items/54b7bf1af018ce829335
[2] https://note.com/ukyousan/n/neea2e631702b
[3] https://qiita.com/jamaican/items/a9f58b74a0cb02825c8d
[4] https://scratch.coach/lesson/how-to-use-cloud-variables/
[5] https://note.com/sadamatsu/n/nb8fc79db026c
[6] https://www.youtube.com/watch?v=hSgK1mAjiTQ
[7] https://note.com/niente0520/n/nf602b05638e0
[8] https://lets-csharp.com/breakout-unity/
[9] https://www.sejuku.net/blog/3960
[10] https://school.dhw.co.jp/course/3dcg/contents/r_howtocreateagame.html

---
Answer from Perplexity: pplx.ai/share